<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="Design and implement your programming language and software analysis tools with mathematical rigor."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="K | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../../../../../../assets/img/favicon.ico" />

<title>
  K | Runtime Verification Inc
</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../../../../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../../../../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../../../../../index.html">
    <img
      class="logo-dark"
      srcset="../../../../../../assets/img/k-logo.png"
      alt="K"
      style="height: 48px;"
    />
    Semantic Framework
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/kframework/k"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../../../../../downloads"
    >Download</a
  >
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem;"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../../../../../">Homepage</a>
      <a class="bd-toc-link" href="../../../../../../downloads">Downloads</a>
      <a class="bd-toc-link" href="../../../../../../k-distribution/tutorial"
        >K Tutorial</a
      >
      <a class="bd-toc-link" href="../../../../../../pending-documentation/"
        >User documentation</a
      >
      <a
        class="bd-toc-link"
        href="../../../../../../k-distribution/include/kframework/builtin/"
        >Builtins</a
      >
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="introduction markdown-preview">
            <!--- Copyright (c) 2014-2019 K Team. All Rights Reserved. ---><html><head></head><body><h1 id="imp">IMP</h1>
<p>Author: Grigore Ro&#x219;u (<a href="mailto:grosu@illinois.edu" target="_blank" rel="noopener">grosu@illinois.edu</a>)<br>
Organization: University of Illinois at Urbana-Champaign</p>
<h3 id="abstract">Abstract</h3>
<p>This is the <strong>K</strong> semantic definition of the classic IMP language.<br>
IMP is considered a folklore language, without an official inventor,<br>
and has been used in many textbooks and papers, often with slight<br>
syntactic variations and often without being called <strong>IMP</strong>.  It includes<br>
the most basic imperative language constructs, namely basic constructs<br>
for arithmetic and Boolean expressions, and variable assignment,<br>
conditional, while loop and sequential composition constructs for statements.</p>
<pre class="language-k"><code><span class="token keyword">module</span> IMP<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> DOMAINS<span class="token operator">-</span>SYNTAX
</code></pre>
<h3 id="syntax">Syntax</h3>
<p>This module defines the syntax of <strong>IMP</strong>.<br>
Note that <code>&lt;=</code> is sequentially strict, and <code>&amp;&amp;</code> is strict only in its first<br>
argument, because we want to give it a short-circuit semantics.</p>
<pre class="language-k"><code>  <span class="token keyword">syntax</span> AExp  <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token keyword">Int</span> <span class="token operator">|</span> <span class="token keyword">Id</span>
                 <span class="token operator">|</span> <span class="token string">&quot;-&quot;</span> <span class="token keyword">Int</span>                    <span class="token punctuation">[</span><span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">|</span> AExp <span class="token string">&quot;/&quot;</span> AExp              <span class="token punctuation">[</span><span class="token class-name">left</span><span class="token punctuation">,</span> <span class="token class-name">strict</span><span class="token punctuation">,</span> color<span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">&gt;</span> AExp <span class="token string">&quot;+&quot;</span> AExp              <span class="token punctuation">[</span><span class="token class-name">left</span><span class="token punctuation">,</span> <span class="token class-name">strict</span><span class="token punctuation">,</span> color<span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">|</span> <span class="token string">&quot;(&quot;</span> AExp <span class="token string">&quot;)&quot;</span>               <span class="token punctuation">[</span><span class="token class-name">bracket</span><span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> BExp  <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token keyword">Bool</span>
                 <span class="token operator">|</span> AExp <span class="token string">&quot;&lt;=&quot;</span> AExp             <span class="token punctuation">[</span><span class="token class-name">seqstrict</span><span class="token punctuation">,</span> <span class="token class-name">latex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>#<span class="token number">1</span><span class="token punctuation">}</span>\leq<span class="token punctuation">{</span>#<span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">|</span> <span class="token string">&quot;!&quot;</span> BExp                   <span class="token punctuation">[</span><span class="token class-name">strict</span><span class="token punctuation">,</span> color<span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">&gt;</span> BExp <span class="token string">&quot;&amp;&amp;&quot;</span> BExp             <span class="token punctuation">[</span><span class="token class-name">left</span><span class="token punctuation">,</span> <span class="token class-name">strict</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">|</span> <span class="token string">&quot;(&quot;</span> BExp <span class="token string">&quot;)&quot;</span>               <span class="token punctuation">[</span><span class="token class-name">bracket</span><span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> Block <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;{&quot;</span> <span class="token string">&quot;}&quot;</span>
                 <span class="token operator">|</span> <span class="token string">&quot;{&quot;</span> Stmt <span class="token string">&quot;}&quot;</span>               <span class="token punctuation">[</span><span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span><span class="token operator">%</span>i<span class="token operator">%</span>n<span class="token operator">%</span><span class="token number">2</span><span class="token operator">%</span>d<span class="token operator">%</span>n<span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> Stmt  <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> Block
                 <span class="token operator">|</span> <span class="token keyword">Id</span> <span class="token string">&quot;=&quot;</span> AExp <span class="token string">&quot;;&quot;</span>            <span class="token punctuation">[</span><span class="token class-name">strict</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">(</span>pink<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">%</span><span class="token number">2</span> <span class="token operator">%</span><span class="token number">3</span><span class="token operator">%</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">|</span> <span class="token string">&quot;if&quot;</span> <span class="token string">&quot;(&quot;</span> BExp <span class="token string">&quot;)&quot;</span>
                   Block <span class="token string">&quot;else&quot;</span> Block         <span class="token punctuation">[</span><span class="token class-name">strict</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> colors<span class="token punctuation">(</span>yellow<span class="token punctuation">,</span> white<span class="token punctuation">,</span> white<span class="token punctuation">,</span> yellow<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">%</span><span class="token number">2</span><span class="token operator">%</span><span class="token number">3</span><span class="token operator">%</span><span class="token number">4</span> <span class="token operator">%</span><span class="token number">5</span> <span class="token operator">%</span><span class="token number">6</span> <span class="token operator">%</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">|</span> <span class="token string">&quot;while&quot;</span> <span class="token string">&quot;(&quot;</span> BExp <span class="token string">&quot;)&quot;</span> Block <span class="token punctuation">[</span>colors<span class="token punctuation">(</span>yellow<span class="token punctuation">,</span>white<span class="token punctuation">,</span>white<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">%</span><span class="token number">2</span><span class="token operator">%</span><span class="token number">3</span><span class="token operator">%</span><span class="token number">4</span> <span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
                 <span class="token operator">&gt;</span> Stmt Stmt                  <span class="token punctuation">[</span><span class="token class-name">left</span><span class="token punctuation">,</span> <span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span><span class="token operator">%</span>n<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre>
<p>An IMP program declares a set of variables and then executes a<br>
statement in the state obtained after initializing all those variables<br>
to 0. <strong>K</strong> provides builtin support for generic syntactic lists:<br>
<code>List{Nonterminal,terminal}</code> stands for <code>terminal</code>-separated lists of <code>Nonterminal</code> elements.</p>
<pre class="language-k"><code>  <span class="token keyword">syntax</span> Pgm <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&quot;int&quot;</span> Ids <span class="token string">&quot;;&quot;</span> Stmt           <span class="token punctuation">[</span><span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">%</span><span class="token number">2</span><span class="token operator">%</span><span class="token number">3</span><span class="token operator">%</span>n<span class="token operator">%</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> colors<span class="token punctuation">(</span>yellow<span class="token punctuation">,</span>pink<span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token keyword">syntax</span> Ids <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> List<span class="token punctuation">{</span><span class="token keyword">Id</span><span class="token punctuation">,</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span>                 <span class="token punctuation">[</span><span class="token class-name">format</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">1</span><span class="token operator">%</span><span class="token number">2</span> <span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">endmodule</span>
</code></pre>
<p>We are done with the definition of IMP&apos;s syntax.  Make sure<br>
that you write and parse several interesting programs before you move to the<br>
semantics.</p>
<pre class="language-k"><code><span class="token keyword">module</span> IMP
  <span class="token keyword">imports</span> IMP<span class="token operator">-</span>SYNTAX
  <span class="token keyword">imports</span> DOMAINS
</code></pre>
<h3 id="semantics">Semantics</h3>
<p>This module defines the semantics of <strong>IMP</strong>.<br>
Before you start adding semantic rules to a <strong>K</strong> definition, you need to<br>
define the basic semantic infrastructure consisting of definitions for<br>
<code>results</code> and the <code>configuration</code>.</p>
<h3 id="values-and-results">Values and results</h3>
<p>IMP only has two types of values, or results of computations: integers<br>
and Booleans.  We here use the <strong>K</strong> builtin variants for both of them.</p>
<pre class="language-k"><code>  <span class="token keyword">syntax</span> KResult <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token keyword">Int</span> <span class="token operator">|</span> <span class="token keyword">Bool</span>
</code></pre>
<h3 id="configuration">Configuration</h3>
<p>The configuration of IMP is trivial: it only contains two cells, one<br>
for the computation and another for the state.  For good encapsulation<br>
and clarity, we place the two cells inside another cell, the <em>top</em> cell<br>
which is labeled <code>T</code>.</p>
<pre class="language-k"><code>  <span class="token keyword">configuration</span> <span class="token operator">&lt;</span>T color<span class="token operator">=</span><span class="token string">&quot;yellow&quot;</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>k color<span class="token operator">=</span><span class="token string">&quot;green&quot;</span><span class="token operator">&gt;</span> $PGM<span class="token punctuation">:</span>Pgm <span class="token operator">&lt;</span><span class="token operator">/</span>k<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>state color<span class="token operator">=</span><span class="token string">&quot;red&quot;</span><span class="token operator">&gt;</span> <span class="token punctuation">.</span>Map <span class="token operator">&lt;</span><span class="token operator">/</span>state<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>T<span class="token operator">&gt;</span>
</code></pre>
<p>The configuration variable <em>PGM</em> tells the <strong>K</strong> tool where to<br>
place the program.  More precisely, the command<br>
<code>krun program</code> parses the program and places the resulting<br>
<strong>K</strong> abstract syntax tree in the <code>k</code> cell before invoking the<br>
semantic rules described in the sequel.  The <code>.</code> in the<br>
<code>state</code> cell, written <code>.Map</code> in ASCII in the<br>
<code>imp.md</code> file, is <strong>K</strong>&apos;s way to say <em>nothing</em>. Technically, it<br>
is a constant which is the unit, or identity, of all maps in <strong>K</strong><br>
(similar dot units exist for other <strong>K</strong> structures, such as lists, sets,<br>
multi-sets, etc.).</p>
<h3 id="arithmetic-expressions">Arithmetic expressions</h3>
<p>The <strong>K</strong> semantics of each arithmetic construct is defined below.</p>
<h3 id="variable-lookup">Variable lookup</h3>
<p>A program variable <code>X</code> is looked up in the state by matching a binding<br>
of the form <code>X |-&gt; I</code> in the state cell. If such a binding does not<br>
exist, then the rewriting process will get stuck. Thus our semantics of<br>
IMP disallows uses of uninitialized variables.  Note that the variable<br>
to be looked up is the first task in the <code>k</code> cell (the cell is<br>
closed to the left and torn to the right), while the binding can be<br>
anywhere in the <code>state</code> cell (the cell is torn at both sides).</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> <span class="token operator">&lt;</span>k<span class="token operator">&gt;</span> X<span class="token punctuation">:</span><span class="token keyword">Id</span> <span class="token operator">=</span><span class="token operator">&gt;</span> I <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>k<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>state<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> X <span class="token operator">|</span><span class="token operator">-</span><span class="token operator">&gt;</span> I <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>state<span class="token operator">&gt;</span>
</code></pre>
<h3 id="arithmetic-operators">Arithmetic operators</h3>
<p>There is nothing special about these, but recall that <strong>K</strong>&apos;s configuration<br>
abstraction mechanism is at work here!  That means that the rewrites in the<br>
rules below all happen at the beginning of the <code>k</code> cell.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> I1 <span class="token operator">/</span> I2 <span class="token operator">=</span><span class="token operator">&gt;</span> I1 <span class="token operator">/</span><span class="token keyword">Int</span> I2  <span class="token keyword">requires</span> I2 <span class="token operator">=</span><span class="token operator">/</span><span class="token operator">=</span><span class="token keyword">Int</span> <span class="token number">0</span>
  <span class="token keyword">rule</span> I1 <span class="token operator">+</span> I2 <span class="token operator">=</span><span class="token operator">&gt;</span> I1 <span class="token operator">+</span><span class="token keyword">Int</span> I2
  <span class="token keyword">rule</span> <span class="token operator">-</span> I1 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">-</span><span class="token keyword">Int</span> I1
</code></pre>
<h3 id="boolean-expressions">Boolean expressions</h3>
<p>The rules below are straightforward.  Note the short-circuited semantics<br>
of <code>&amp;&amp;</code>; this is the reason we annotated the syntax of<br>
<code>&amp;&amp;</code> with the <strong>K</strong> attribute <code>strict(1)</code> instead of <code>strict</code>.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> I1 <span class="token operator">&lt;=</span> I2 <span class="token operator">=</span><span class="token operator">&gt;</span> I1 <span class="token operator">&lt;=</span><span class="token keyword">Int</span> I2
  <span class="token keyword">rule</span> <span class="token operator">!</span> T <span class="token operator">=</span><span class="token operator">&gt;</span> notBool T
  <span class="token keyword">rule</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> B <span class="token operator">=</span><span class="token operator">&gt;</span> B
  <span class="token keyword">rule</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> _ <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">false</span>
</code></pre>
<h3 id="blocks-and-statements">Blocks and Statements</h3>
<p>There is one rule per statement construct except for the conditional,<br>
which needs two rules.</p>
<h3 id="blocks">Blocks</h3>
<p>The empty block <code>{}</code> is simply dissolved.  The <code>.</code> below is the<br>
unit of the computation list structure <code>K</code>, that is, the empty task.<br>
Similarly, the non-empty blocks are dissolved and replaced by their statement<br>
contents, thus effectively giving them a bracket semantics; we can afford to<br>
do this only because we have no block-local variable declarations yet in IMP.<br>
Since we tagged the rules below as <em>structural</em>, the <strong>K</strong> tool structurally<br>
erases the block constructs from the computation structure, without<br>
considering their erasure as computational steps in the resulting transition<br>
systems.  You can make these rules computational (dropping the attribute<br>
<code>structural</code>) if you do want these to count as computational steps.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">.</span>   <span class="token punctuation">[</span><span class="token class-name">structural</span><span class="token punctuation">]</span>
  <span class="token keyword">rule</span> <span class="token punctuation">{</span>S<span class="token punctuation">}</span> <span class="token operator">=</span><span class="token operator">&gt;</span> S  <span class="token punctuation">[</span><span class="token class-name">structural</span><span class="token punctuation">]</span>
</code></pre>
<h3 id="assignment">Assignment</h3>
<p>The assigned variable is updated in the state.  The variable is expected<br>
to be declared, otherwise the semantics will get stuck.  At the same time,<br>
the assignment is dissolved.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> <span class="token operator">&lt;</span>k<span class="token operator">&gt;</span> X <span class="token operator">=</span> I<span class="token punctuation">:</span><span class="token keyword">Int</span><span class="token punctuation">;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>k<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>state<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> X <span class="token operator">|</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>_ <span class="token operator">=</span><span class="token operator">&gt;</span> I<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>state<span class="token operator">&gt;</span>
</code></pre>
<h3 id="sequential-composition">Sequential composition</h3>
<p>Sequential composition is simply structurally translated into <strong>K</strong>&apos;s<br>
builtin task sequentialization operation.  You can make this rule<br>
computational (i.e., remove the <code>structural</code> attribute) if you<br>
want it to count as a computational step.  Recall that the semantics<br>
of a program in a programming language defined in <strong>K</strong> is the transition<br>
system obtained from the initial configuration holding that program<br>
and counting only the steps corresponding to computational rules as<br>
transitions (i.e., hiding the structural rules as unobservable, or<br>
internal steps).</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> S1<span class="token punctuation">:</span>Stmt S2<span class="token punctuation">:</span>Stmt <span class="token operator">=</span><span class="token operator">&gt;</span> S1 <span class="token operator">~</span><span class="token operator">&gt;</span> S2  <span class="token punctuation">[</span><span class="token class-name">structural</span><span class="token punctuation">]</span>
</code></pre>
<h3 id="conditional">Conditional</h3>
<p>The conditional statement has two semantic cases, corresponding to<br>
when its condition evaluates to <code>true</code> or to <code>false</code>.<br>
Recall that the conditional was annotated with the attribute<br>
<code>strict(1)</code> in the syntax module above, so only its first<br>
argument is allowed to be evaluated.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> if <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>  S else _ <span class="token operator">=</span><span class="token operator">&gt;</span> S
  <span class="token keyword">rule</span> if <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> _ else S <span class="token operator">=</span><span class="token operator">&gt;</span> S
</code></pre>
<h3 id="while-loop">While loop</h3>
<p>We give the semantics of the <code>while</code> loop by unrolling.<br>
Note that we preferred to make the rule below structural.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> while <span class="token punctuation">(</span>B<span class="token punctuation">)</span> S <span class="token operator">=</span><span class="token operator">&gt;</span> if <span class="token punctuation">(</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>S while <span class="token punctuation">(</span>B<span class="token punctuation">)</span> S<span class="token punctuation">}</span> else <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token punctuation">[</span><span class="token class-name">structural</span><span class="token punctuation">]</span>
</code></pre>
<h3 id="programs">Programs</h3>
<p>The semantics of an IMP program is that its body statement is executed<br>
in a state initializing all its global variables to 0.  Since <strong>K</strong>&apos;s<br>
syntactic lists are internally interpreted as cons-lists (i.e., lists<br>
constructed with a head element followed by a tail list), we need to<br>
distinguish two cases, one when the list has at least one element and<br>
another when the list is empty.  In the first case we initialize the<br>
variable to 0 in the state, but only when the variable is not already<br>
declared (all variables are global and distinct in IMP).  We prefer to<br>
make the second rule structural, thinking of dissolving the residual<br>
empty <code>int;</code> declaration as a structural cleanup rather than as<br>
a computational step.</p>
<pre class="language-k"><code>  <span class="token keyword">rule</span> <span class="token operator">&lt;</span>k<span class="token operator">&gt;</span> int <span class="token punctuation">(</span>X<span class="token punctuation">,</span>Xs <span class="token operator">=</span><span class="token operator">&gt;</span> Xs<span class="token punctuation">)</span><span class="token punctuation">;</span>_ <span class="token operator">&lt;</span><span class="token operator">/</span>k<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>state<span class="token operator">&gt;</span> Rho<span class="token punctuation">:</span>Map <span class="token punctuation">(</span><span class="token punctuation">.</span>Map <span class="token operator">=</span><span class="token operator">&gt;</span> X<span class="token operator">|</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">/</span>state<span class="token operator">&gt;</span>
    <span class="token keyword">requires</span> notBool <span class="token punctuation">(</span>X in keys<span class="token punctuation">(</span>Rho<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">rule</span> int <span class="token punctuation">.</span>Ids<span class="token punctuation">;</span> S <span class="token operator">=</span><span class="token operator">&gt;</span> S  <span class="token punctuation">[</span><span class="token class-name">structural</span><span class="token punctuation">]</span>
<span class="token keyword">endmodule</span>
</code></pre>
</body></html>
          </div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../../../../../../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../../../../../../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../../../../../../assets/js/index.js"></script>
    <script>
      $(function () {
        // Render youtube video
        const anchorElements = document.querySelectorAll(".markdown-preview a");
        for (let i = anchorElements.length - 1; i >= 0; i--) {
          if (anchorElements.length - 1 - i > 3) {
            break;
          }
          const anchorElement = anchorElements[i];
          const href = anchorElement.getAttribute("href");
          if (href.match(/^https?:\/\/youtu.be\//)) {
            const match = href.match(/^https?:\/\/youtu.be\/(.+?)$/);
            if (match && match[1]) {
              const youtubeId = match[1];
              const $iframe = $(`
<div style="text-align:center;">
  <iframe
    width="560"
    height="315"
    src="https://www.youtube.com/embed/${youtubeId}"
    frameborder="0"
    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
    style="max-width: 100%;"
  ></iframe>
  <p>The video is out of date</p>
</div>
`);
              $(anchorElement).replaceWith($iframe[0]);
            }
          }
        }
      });
    </script>
  </body>
</html>
