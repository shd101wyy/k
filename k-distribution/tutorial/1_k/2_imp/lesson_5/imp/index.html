<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="Design and implement your programming language and software analysis tools with mathematical rigor."
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="K | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../../../../../../assets/img/favicon.ico" />

<title>
  K | Runtime Verification Inc
</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../../../../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../../../../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../../../../../index.html">
    <img
      class="logo-dark"
      srcset="../../../../../../assets/img/k-logo.png"
      alt="K"
      style="height: 48px;"
    />
    Semantic Framework
  </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/kframework/k"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../../../../../downloads"
    >Download</a
  >
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem;"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../../../../../">Homepage</a>
      <a class="bd-toc-link" href="../../../../../../downloads">Downloads</a>
      <a class="bd-toc-link" href="../../../../../../k-distribution/tutorial"
        >K Tutorial</a
      >
      <a class="bd-toc-link" href="../../../../../../projects/">Projects</a>
      <a class="bd-toc-link" href="../../../../../../news/">News</a>
      <a class="bd-toc-link" href="../../../../../../events/">Events</a>
      <a class="bd-toc-link" href="../../../../../../funding/">Funding</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="introduction markdown-preview">
            <!--- Copyright (c) 2014-2019 K Team. All Rights Reserved. --->
<h1>IMP</h1>
<p>Author: Grigore Ro»ôu (<a href="mailto:grosu@illinois.edu">grosu@illinois.edu</a>)<br>
Organization: University of Illinois at Urbana-Champaign</p>
<h3>Abstract</h3>
<p>This is the <strong>K</strong> semantic definition of the classic IMP language.
IMP is considered a folklore language, without an official inventor,
and has been used in many textbooks and papers, often with slight
syntactic variations and often without being called <strong>IMP</strong>.  It includes
the most basic imperative language constructs, namely basic constructs
for arithmetic and Boolean expressions, and variable assignment,
conditional, while loop and sequential composition constructs for statements.</p>
<pre><code class="language-k">module IMP-SYNTAX
  imports DOMAINS-SYNTAX
</code></pre>
<h3>Syntax</h3>
<p>This module defines the syntax of <strong>IMP</strong>.
Note that <code>&lt;=</code> is sequentially strict, and <code>&amp;&amp;</code> is strict only in its first
argument, because we want to give it a short-circuit semantics.</p>
<pre><code class="language-k">  syntax AExp  ::= Int | Id
                 | &quot;-&quot; Int                    [format(%1%2)]
                 | AExp &quot;/&quot; AExp              [left, strict, color(pink)]
                 &gt; AExp &quot;+&quot; AExp              [left, strict, color(pink)]
                 | &quot;(&quot; AExp &quot;)&quot;               [bracket]
  syntax BExp  ::= Bool
                 | AExp &quot;&lt;=&quot; AExp             [seqstrict, latex({#1}\leq{#2}), color(pink)]
                 | &quot;!&quot; BExp                   [strict, color(pink)]
                 &gt; BExp &quot;&amp;&amp;&quot; BExp             [left, strict(1), color(pink)]
                 | &quot;(&quot; BExp &quot;)&quot;               [bracket]
  syntax Block ::= &quot;{&quot; &quot;}&quot;
                 | &quot;{&quot; Stmt &quot;}&quot;               [format(%1%i%n%2%d%n%3)]
  syntax Stmt  ::= Block
                 | Id &quot;=&quot; AExp &quot;;&quot;            [strict(2), color(pink), format(%1 %2 %3%4)]
                 | &quot;if&quot; &quot;(&quot; BExp &quot;)&quot;
                   Block &quot;else&quot; Block         [strict(1), colors(yellow, white, white, yellow), format(%1 %2%3%4 %5 %6 %7)]
                 | &quot;while&quot; &quot;(&quot; BExp &quot;)&quot; Block [colors(yellow,white,white), format(%1 %2%3%4 %5)]
                 &gt; Stmt Stmt                  [left, format(%1%n%2)]
</code></pre>
<p>An IMP program declares a set of variables and then executes a
statement in the state obtained after initializing all those variables
to 0. <strong>K</strong> provides builtin support for generic syntactic lists:
<code>List{Nonterminal,terminal}</code> stands for <code>terminal</code>-separated lists of <code>Nonterminal</code> elements.</p>
<pre><code class="language-k">  syntax Pgm ::= &quot;int&quot; Ids &quot;;&quot; Stmt           [format(%1 %2%3%n%4), colors(yellow,pink)]
  syntax Ids ::= List{Id,&quot;,&quot;}                 [format(%1%2 %3)]
endmodule
</code></pre>
<p>We are done with the definition of IMP's syntax.  Make sure
that you write and parse several interesting programs before you move to the
semantics.</p>
<pre><code class="language-k">module IMP
  imports IMP-SYNTAX
  imports DOMAINS
</code></pre>
<h3>Semantics</h3>
<p>This module defines the semantics of <strong>IMP</strong>.
Before you start adding semantic rules to a <strong>K</strong> definition, you need to
define the basic semantic infrastructure consisting of definitions for
<code>results</code> and the <code>configuration</code>.</p>
<h3>Values and results</h3>
<p>IMP only has two types of values, or results of computations: integers
and Booleans.  We here use the <strong>K</strong> builtin variants for both of them.</p>
<pre><code class="language-k">  syntax KResult ::= Int | Bool
</code></pre>
<h3>Configuration</h3>
<p>The configuration of IMP is trivial: it only contains two cells, one
for the computation and another for the state.  For good encapsulation
and clarity, we place the two cells inside another cell, the <em>top</em> cell
which is labeled <code>T</code>.</p>
<pre><code class="language-k">  configuration &lt;T color=&quot;yellow&quot;&gt;
                  &lt;k color=&quot;green&quot;&gt; $PGM:Pgm &lt;/k&gt;
                  &lt;state color=&quot;red&quot;&gt; .Map &lt;/state&gt;
                &lt;/T&gt;
</code></pre>
<p>The configuration variable <em>PGM</em> tells the <strong>K</strong> tool where to
place the program.  More precisely, the command
<code>krun program</code> parses the program and places the resulting
<strong>K</strong> abstract syntax tree in the <code>k</code> cell before invoking the
semantic rules described in the sequel.  The <code>.</code> in the
<code>state</code> cell, written <code>.Map</code> in ASCII in the
<code>imp.md</code> file, is <strong>K</strong>'s way to say <em>nothing</em>. Technically, it
is a constant which is the unit, or identity, of all maps in <strong>K</strong>
(similar dot units exist for other <strong>K</strong> structures, such as lists, sets,
multi-sets, etc.).</p>
<h3>Arithmetic expressions</h3>
<p>The <strong>K</strong> semantics of each arithmetic construct is defined below.</p>
<h3>Variable lookup</h3>
<p>A program variable <code>X</code> is looked up in the state by matching a binding
of the form <code>X |-&gt; I</code> in the state cell. If such a binding does not
exist, then the rewriting process will get stuck. Thus our semantics of
IMP disallows uses of uninitialized variables.  Note that the variable
to be looked up is the first task in the <code>k</code> cell (the cell is
closed to the left and torn to the right), while the binding can be
anywhere in the <code>state</code> cell (the cell is torn at both sides).</p>
<pre><code class="language-k">  rule &lt;k&gt; X:Id =&gt; I ...&lt;/k&gt; &lt;state&gt;... X |-&gt; I ...&lt;/state&gt;
</code></pre>
<h3>Arithmetic operators</h3>
<p>There is nothing special about these, but recall that <strong>K</strong>'s configuration
abstraction mechanism is at work here!  That means that the rewrites in the
rules below all happen at the beginning of the <code>k</code> cell.</p>
<pre><code class="language-k">  rule I1 / I2 =&gt; I1 /Int I2  requires I2 =/=Int 0
  rule I1 + I2 =&gt; I1 +Int I2
  rule - I1 =&gt; 0 -Int I1
</code></pre>
<h3>Boolean expressions</h3>
<p>The rules below are straightforward.  Note the short-circuited semantics
of <code>&amp;&amp;</code>; this is the reason we annotated the syntax of
<code>&amp;&amp;</code> with the <strong>K</strong> attribute <code>strict(1)</code> instead of <code>strict</code>.</p>
<pre><code class="language-k">  rule I1 &lt;= I2 =&gt; I1 &lt;=Int I2
  rule ! T =&gt; notBool T
  rule true &amp;&amp; B =&gt; B
  rule false &amp;&amp; _ =&gt; false
</code></pre>
<h3>Blocks and Statements</h3>
<p>There is one rule per statement construct except for the conditional,
which needs two rules.</p>
<h3>Blocks</h3>
<p>The empty block <code>{}</code> is simply dissolved.  The <code>.</code> below is the
unit of the computation list structure <code>K</code>, that is, the empty task.
Similarly, the non-empty blocks are dissolved and replaced by their statement
contents, thus effectively giving them a bracket semantics; we can afford to
do this only because we have no block-local variable declarations yet in IMP.
Since we tagged the rules below as <em>structural</em>, the <strong>K</strong> tool structurally
erases the block constructs from the computation structure, without
considering their erasure as computational steps in the resulting transition
systems.  You can make these rules computational (dropping the attribute
<code>structural</code>) if you do want these to count as computational steps.</p>
<pre><code class="language-k">  rule {} =&gt; .   [structural]
  rule {S} =&gt; S  [structural]
</code></pre>
<h3>Assignment</h3>
<p>The assigned variable is updated in the state.  The variable is expected
to be declared, otherwise the semantics will get stuck.  At the same time,
the assignment is dissolved.</p>
<pre><code class="language-k">  rule &lt;k&gt; X = I:Int; =&gt; . ...&lt;/k&gt; &lt;state&gt;... X |-&gt; (_ =&gt; I) ...&lt;/state&gt;
</code></pre>
<h3>Sequential composition</h3>
<p>Sequential composition is simply structurally translated into <strong>K</strong>'s
builtin task sequentialization operation.  You can make this rule
computational (i.e., remove the <code>structural</code> attribute) if you
want it to count as a computational step.  Recall that the semantics
of a program in a programming language defined in <strong>K</strong> is the transition
system obtained from the initial configuration holding that program
and counting only the steps corresponding to computational rules as
transitions (i.e., hiding the structural rules as unobservable, or
internal steps).</p>
<pre><code class="language-k">  rule S1:Stmt S2:Stmt =&gt; S1 ~&gt; S2  [structural]
</code></pre>
<h3>Conditional</h3>
<p>The conditional statement has two semantic cases, corresponding to
when its condition evaluates to <code>true</code> or to <code>false</code>.
Recall that the conditional was annotated with the attribute
<code>strict(1)</code> in the syntax module above, so only its first
argument is allowed to be evaluated.</p>
<pre><code class="language-k">  rule if (true)  S else _ =&gt; S
  rule if (false) _ else S =&gt; S
</code></pre>
<h3>While loop</h3>
<p>We give the semantics of the <code>while</code> loop by unrolling.
Note that we preferred to make the rule below structural.</p>
<pre><code class="language-k">  rule while (B) S =&gt; if (B) {S while (B) S} else {}  [structural]
</code></pre>
<h3>Programs</h3>
<p>The semantics of an IMP program is that its body statement is executed
in a state initializing all its global variables to 0.  Since <strong>K</strong>'s
syntactic lists are internally interpreted as cons-lists (i.e., lists
constructed with a head element followed by a tail list), we need to
distinguish two cases, one when the list has at least one element and
another when the list is empty.  In the first case we initialize the
variable to 0 in the state, but only when the variable is not already
declared (all variables are global and distinct in IMP).  We prefer to
make the second rule structural, thinking of dissolving the residual
empty <code>int;</code> declaration as a structural cleanup rather than as
a computational step.</p>
<pre><code class="language-k">  rule &lt;k&gt; int (X,Xs =&gt; Xs);_ &lt;/k&gt; &lt;state&gt; Rho:Map (.Map =&gt; X|-&gt;0) &lt;/state&gt;
    requires notBool (X in keys(Rho))
  rule int .Ids; S =&gt; S  [structural]
endmodule
</code></pre>

          </div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../../../../../../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../../../../../../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../../../../../../assets/js/index.js"></script>
    <script>
      $(function () {
        // Render youtube video
        const anchorElements = document.querySelectorAll(".markdown-preview a");
        for (let i = anchorElements.length - 1; i >= 0; i--) {
          if (anchorElements.length - 1 - i > 3) {
            break;
          }
          const anchorElement = anchorElements[i];
          const href = anchorElement.getAttribute("href");
          if (href.match(/^https?:\/\/youtu.be\//)) {
            const match = href.match(/^https?:\/\/youtu.be\/(.+?)$/);
            if (match && match[1]) {
              const youtubeId = match[1];
              const $iframe = $(`
<div style="text-align:center;">
  <iframe
    width="560"
    height="315"
    src="https://www.youtube.com/embed/${youtubeId}"
    frameborder="0"
    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
    style="max-width: 100%;"
  ></iframe>
  <p>The video is out of date</p>
</div>
`);
              $(anchorElement).replaceWith($iframe[0]);
            }
          }
        }
      });
    </script>
  </body>
</html>
